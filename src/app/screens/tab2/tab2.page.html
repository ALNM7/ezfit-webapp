<ion-header translucent></ion-header>

<ion-content class="camera-content" fullscreen>
  <div class="camera-container">
    <!-- Video en vivo -->
    <video #video autoplay playsinline muted></video>

    <!-- Overlay cuadrado -->
    <div class="overlay-square"></div>

    <!-- Imagen capturada -->
    <img
      *ngIf="capturedImage"
      [src]="capturedImage"
      class="captured-image"
      [class.flash]="showFlash"
    />

    <!-- Spinner de carga -->
    <ion-item *ngIf="isLoading" class="loading-container">
      <ion-label>Cargando</ion-label>
      <ion-spinner name="dots"></ion-spinner>
    </ion-item>

    <!-- Botones -->
    <ion-fab vertical="bottom" horizontal="end" slot="fixed">
      <ion-fab-button (click)="openFileSelector()">
        <ion-icon name="image-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab>

    <ion-fab vertical="bottom" horizontal="center" slot="fixed">
      <ion-fab-button color="danger" (click)="takePhoto()" [disabled]="isLoading">
        <ion-icon name="camera-outline"></ion-icon>
      </ion-fab-button>
    </ion-fab>

    <input #fileInput type="file" accept="image/*" hidden (change)="handleFileInput($event)">
  </div>
</ion-content>
